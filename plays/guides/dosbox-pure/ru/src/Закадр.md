Как играть в ДОС-игры в 2023 году?

Можно купить для этого старый компьютер. Можно покупать официальные цифровые версии игр в магазинах типа ГоГ или Стим. Можно воспользоваться эмулятором старого железа типа PCEM, или запускать игры через одну из сборок DosBox.

Я попровал все эти способы и понял, что у каждого из них есть свои недостатки. Не буду тратить время на их перечисление, а вместо этого расскажу о том, что лично для меня является оптимальным способом запускать ДОС-игры.

Я считаю, что cамый удобный и простой способ играть под DOS - это использовать связку из RetroArch, ядра DosBox Pure и фронтенда Emulation Station DE. Впрочем, EmulationStation - это тема для отдельного разговора, а сегодня я остановлюсь только на первых двух пунктах. 

==RetroArch==

Думаю, что все, кто интересуется старыми играми, знают, что такое ретро арч, или хотя бы слышали про него, но для новичков я кратко о нём расскажу. Ретро Арч - это такая оболочка разных эмуляторов, начиная от первых игровых консолей и заканчивая аркадными автоматами и ПК.

==Установка==

Как видно по разделу загрузок, РетроАрч доступен на большинстве актуальных платформ и операционных систем. Также его можно установить из Стим.

У меня основная система это Линукс, а также пользозуюсь Виндоус на планшете Сёрфейс. В этом видео я буду использовать Линукс, но под Виндоус всё работает точно так же, я проверял.

Устанавливать РетроАрч я буду через Флетпак. Нахожу его в списке доступных приложений, выбираю вариант Флэтпак, запускаю установку и дожидаюсь завершение загрузки.

Когда РетроАрч установился, я создам для него ярлык на рабочем столе, просто для удобства.

==Первый запуск и основные настройки==

При первом запуске RetroArch мы видим вот такое окно. 

Слева находится основное меню с разделами, а справа - содержимое каждого раздела.

Перемещаться по пунктам меню можно с помощью стрелок, пункты меню открываются нажатием Enter, а вернуться назад можно, нажав Backspace.

В разделе Видео можно выбрать, чтобы программа всегда запускалась в полноэкранном режиме.

Также я советую сразу разобраться с настройками основных горячих клавиш. 

Для этого надо зайти в раздел настроек, затем Input. Находим пункт Auto Enable Game Focus Mode. Когда включается режим Focus Mode, то все нажатия кнопок будут отправляться в запущенную игру, а горячие клавиши самого РетроАрч работать не будут. Для DOS-игр нам пригодится, чтобы этот режим включался автоматически при запуске игры. Для этого нужно выбрать режим Detect.

Далее заходим в меню HotKeys. Здесь надо обратить внимание на пункт Menu Toggle. По умолчанию эта клавиша F1. Её можно не менять, надо просто запомнить, потому что она пригодится. Этой клавишей можно открывать меню RetroArch прямо во время игры.

Надо отметить один важный момент - эта клавиша не будет работать, если у вас активирован режим Game Focus (в таком случае F1 будет нажиматься в самой игре). То есть сначала надо будет отключить Game Focus, а потом нажимать F1.

По умолчанию GameFocus отключается клавишей ScrollLock, но я обычно меняю её на правый Control. Теперь во время игры я могу нажать правый Control, чтобы отключить GameFocus, а потом нажать F1, чтобы открыть меню.

Также хочу обратить внимание, на несколько важных папок, в который RetroArch сохраняет настройки игр и другие важные данные. Это папки system, saves и config. Их расположение по умолчанию зависит от того, каким образом вы установили RetroArch. Но я предпочитаю, чтобы они всегда находились в удобном для меня месте. Сейчас я создам их прямо на рабочем столе, для наглядности, но вы можете их создать там, где вам захочется. Также я создам папку roms, в которой будут хранится сами игры.

После того, как мы создали эти папки, надо указать RetroArch, где они находится. Для этого заходим в меню Configuration -> Directory, и там находим System/BIOS, открываем и выбираем там путь к той папке system, которую мы создали. 

File Browser - здесь указываем путь к папке roms.

Далее находим папку Config, и также указываем для неё путь.

И повторяем то же самое для папки Save Files.

==DosBox-Pure==

Эмуляторы в РетроАрч называются ядрами, или Core, и вы можете установить себе только те ядра, которые нам нужны. В нашем случае нам понадобится ядро DoxBox-Pure.

Это ядро основано на коде DosBox, но в нём есть дополнительные полезные фишки, например, можно с его помощью установить Windows 98. А ещё его можно удобно настраивать без ковыряния в конфигурационных файлах и под каждую игру сделать отдельные настройки.

Прежде всего это ядро надо установить. Для этого заходим в Main Menu -> Online Updater -> Core Downloader. Проматываем вниз, ищем DoxBox Pure. Нажимаем Enter и ядро загружается.

Попробуем запустить ядро и посмотрим, что получится. Идём в Main Menu, Load Core,  выбираем DosBox-Pure, Start Core.

Запускаетя вот такая оболочка. Здесь мы видим, что ядро не нашло никаких исполняемых файлов. Это нормально, потому что никаких игр мы их ещё не добавили.

Но сейчас мы уже можем посмотреть, какие у этого ядра есть настройки. Отключаем GameFocus, если он включен, нажимаем F1, чтобы открыть меню RetroArch и выбираем Core Options.

Я остановлюсь только на тех настройках, которые могут пригодиться в первую очередь. Подробный разбор всех доступных настроек я сделаю в одном из следующих видео.

**Input Options** или настройки ввода

Здесь надо обратить внимание на пункт Mouse Sensivity или чувствительность мыши. Он пригодится, если мышь в играх бегает слишком быстро. Я уменьшу его до 50%.

**Performance Options** или настройки производительности

Здесь нас интересует пункт Emulated Performance или эмулируемая производительность. По умолчанию стоит режим AUTO, и это должно подойти для большинства игр. Но для некоторых игр может понадобится выбрать скорость работы процессора вручную. Как задавать настройки для отдельных игры, я покажу позже.

**Video Options** или настройки видео

Emulated Graphics Chip или эмулируемая видеокарта: здесь можно выбрать тип эмулируемого графического режима, то есть грубо говоря, тип видеокарты.

SVGA Mode или режим SVGA. Если в предыдущем пункте было выбрано SVGA, то здесь можно указать, какая именно SVGA карта будет эмулироваться.

Эмуляция 3dfx Voodoo. Название говорит само за себя. Здесь включается эмуляция ускорителя 3dfx Voodoo первой версии. Можно выбрать количество видеопамяти.

Aspect Ratio Correction - коррекция соотношения сторон экрана. Тут нужно выбрать режим ON, чтобы игры в разрешении 320 на 200 не были растянуты по горизонтали.

**System Options** или системные настройки

Memory Size: объём оперативной памяти в эмулируемой системе. Также тут можно отключить расширенную память.

CPU Type: тип эмулироемого процессора. Этот параметр отличается от настройки Emulated Performance, которую мы видели раньше. Здесь выбирается не скорость работы процессора, а набор доступных инструкций. В некоторых играх может потребоваться выбрать другой тип процессора.

**Audio** - самый интересный пункт, на мой взгляд.

SoundBlaster Settings, настройки СаундБластера - тут можно выбрать параметры саунд бластера, такие как IRQ и DMA. Их можно не менять, но надо запомнить, какие параметры используются, чтобы потом указывать их при настройке звука в игре.

MIDI Output - тут настраивается миди-синтезатор. Есть четыре варианта:

1. Не использовать миди
2. Использовать миди-синтезатор из вашей основной операционной системы
3. Использовать файлы SoundFont для поддержки стандарта General Midi
4. Использовать эмуляцию Roland MT-32

На последних двух пунктах я остановлюсь немного подробнее. 

SoundFont - если описать грубо - это файл, в котором содержится набор звуков, которые midi синтезатор будет использовать для воспроизведения музыки. Если у вас есть такой файл или файлы, то положите их в папку system, о которой я рассказывал выше, и они появятся в этом списке. У меня есть Sound Font, который пытается быть похожим на MIDI-синтезатор Roland Sound Canvas, также несколько фонтов с сайта Фила. Ссылки на них будут в описании. Само собой, при выборе разных файлов, звук в игре будет отличаться. Можем сравнить их на примере Дюка:

1. Первый будет Fluid - ((demo))
2. А теперь Weeds - ((demo))
3. А теперь Sound Canvas - ((demo))

Кстати, менять выбранный файл SoundFont можно даже при запущенной игре.

Roland MT-32. Для эмуляции Роланда вам надо будет где-то найти его ромы, список нужных файлов вы видите сейчас на экране. Эти файлы надо также положить в папку system, и тогда Роланд можно будет выбрать в настройках миди.

SoundBlaster Type - тут можно выбрать тип Саунд Бластера

AdLib / FM Mode - тут можно выбрать каким образом эмулируется Adlib и FM синтез.

И последний пункт - Gravis Ultrasound. Его можно либо включить, либо выключить. Я пробовал использовать его в некоторых играх, при этом он работал для воспроизведения звуков, но музыка через него не играла. Возможно, нужны какие-то дополнительные настройки, либо же это ограничения самого эмулятора.

==Запуск игр==

Запускать игры через DosBox-Pure можно напрямую, просто выбрав нужный EXE файл через меню Load Content. Но я рекомендую другой способ.

Для этого, прежде чем запустить игру, надо упаковать все её файлы в ZIP архив. Таким образом, мы создаём аналог РОМ-файла, которые используются для консольных игр. 

Преимуществом этого способа является то, что все изменения, которые игра делает на диск C:, например, установленные файлы самой игры, файлы сохранений, настройки звука и т.п., так вот все эти изменения сохраняются в виде архива в папке saves, и при следующем запуске этой игры они будут автоматически добавлены на диск C:.

Сейчас я покажу, как можно этим способом запускать игры, которые не требуют установки, игры, которые устанавливаются с дискет, и игры, которые ставятся с диска.

Для этого я подготовил три архива с Дюной 2.

Для запуска игры открываем RetroArch, заходим в Load Content, выбираем нужный РОМ-файл и жмём Load Archive.

Сейчас я открыл РОМ, в котором лежит копия уже установленной версии игры. Все файлы из архива отображаются в виде содержимого диска C: Можем это проверить через режим командной строки. Видим, что у нас на диске C: есть папка DUNE2, а в ней лежат все файлы с игрой. Чтобы вернуться в меню используем команду PUREMENU.

Запустим SETUP.EXE, чтобы настроить управление и звук. Игра настроена и можно теперь её запустить.

Теперь посмотрим, как устанавливать игру из образов дискет. Для этого у меня подготовлен архив, в котором лежат только IMA файлы с игрой, это и есть образы дискет.

Запускаем РОМ и видим, что в нём есть четыре образа дискет и сейчас подключен первый из них. И мы также видим, что содержимое этого образа доступно через диск А:. 

Запускаем установщик.

Оставляем все параметры по умолчанию и начинаем установку. Начинается распаковка файлов. Через какое-то время установщик попросит вставить вторую дискету. Для этого нужно открыть меню RetroArch и в нём найти пункт Disc Control или управление дисками. Выбираем Eject Disk, чтобы извлечь текущий диск. После этого нажимаем Current Disk Index, чтобы выбрать другой диск. Выбираем вторую дискету и нажимаем Inject Disk, чтобы вставить её в виртуальный дисковод. Нас сразу возвращает обратно в установщик. Здесь нам остаётся только нажать любую клавишу и установка продолжится дальше.

То же самое надо повторить с остальными дискетами. 

Видим сообщение, что установка успешно завершилась. Автоматически запускается программа настройки, которую мы уже видели раньше.

Теперь мы видим, что у нас на диске С появились новые файлы. Это значит, что игра действительно установилась и мы можем её запустить.

А теперь давайте посмотрим, что же появилось у нас в папке Saves. Мы видим, что там теперь лежит два архива, которые называются так же, как и РОМы, которые мы запускали.

Откроем файл Dune2_IMA, и видим, что в нём находятся как раз все те файлы, которые установщик скопировал на диск С. 

А теперь давайте установим СД-версию Дюны. 

Выбираем соответствующий РОМ-файл и запускаем его. Мы видим, что у нас подключен образ Dune2CD.CUE, а его содержимое доступно в виде диска D:. 

Запускаем установщик. Ждём, пока игра установится. После этого попадаем в уже хорошо знакомую программу настройки.

Теперь можем запустить игру с диска C: 

Если мы зайдём в папку Save, то можем убедится, что установленные файлы действительно лежат в ней.

Если игра была на нескольких дисках, то переключаться между ними можно также с помощью меню Disk Control.


==Автозапуск==

Если в образе с игрой есть несколько исполняемых файлов, то каждый раз при запуске этого образа надо будет выбирать, какой именно файл надо запустить.

Чтобы этого избежать, можно выбрать файл, который будет запускаться автоматически.

Для этого надо просто выбрать этот файл, нажать стрелку Вправо и запустить его. 

Если мы снова запустим этот образ, то автоматически запуститься выбранный нами файл. 

Чтобы отключить автозапуск, надо открыть меню RetroArch и выбрать пункт Restart, при этом удерживая Shift. Тогда мы попадём в меню DosBox-Pure и отсюда можно будет отключить автозапуск. Для этого надо выбрать файл и нажать стрелку Влево. Всё, теперь этот файл запускаться автоматически не будет. 

==Особые настройки для игр==

Для каждой игры можно создавать особые настройки DosBox-Pure. Например, для MIDI у меня по умолчанию используется саунд фонт Sound Canvas, но Дюну я хочу запускать с поддержкой Roland MT-32. Чтобы это сделать, надо запустить игру, зайти в настройки ядра, поменять там нужны настройки, затем перейти в Manage Core Options и выбрать Save Game Options. При этом будет создан отдельный файл с настройками для этой конкретной игры. Это файл лежит в папке config, можно его найти и посмотреть. Как видим, в нём указан Roland в разделе midi.

==Заключение==

Итак, это всё, о чём я хотел рассказать сегодня. А в следующем видео я покажу, как установить и настроить фронтенд EmulationStation для управления вашей ДОС-игротекой. 

Всем пока!